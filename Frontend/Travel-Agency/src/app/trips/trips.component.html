<section class="trips-section py-20 bg-gradient-to-br from-blue-50 to-purple-50 min-h-[350px] relative">
  <div class="container mx-auto px-6 max-w-7xl relative">
    <h2 class="text-4xl font-extrabold text-center text-blue-900 mb-12">
      Explore Egyptian Treasures
    </h2>

    <button
      class="scroll-btn left-0 absolute top-1/2 -translate-y-1/2"
      (click)="scrollLeft()"
      aria-label="Scroll Left"
      type="button"
    >
      <svg viewBox="0 0 24 24" class="arrow-icon" aria-hidden="true" focusable="false">
        <path d="M15 18l-6-6 6-6" />
      </svg>
    </button>

    <div
      #scrollContainer
      class="trips-scroll-container flex overflow-x-auto scroll-smooth snap-x snap-mandatory space-x-4 sm:space-x-6 py-4 scrollbar-hide"
      tabindex="0"
      role="list"
      aria-label="List of Egyptian trips"
    >
      <div
        *ngFor="let trip of trips"
        class="trip-card snap-start bg-white rounded-3xl shadow-lg hover:shadow-2xl transition-shadow duration-300 cursor-pointer p-6 flex-shrink-0 flex flex-col"
        role="listitem"
        tabindex="0"
      >
        <img
          [src]="trip.imageUrl"
          [alt]="trip.title"
          class="rounded-2xl object-cover w-full h-52 mb-6 shadow-md transition-transform duration-300"
          loading="lazy"
          decoding="async"
        />

        <h3 class="text-2xl font-semibold text-blue-800 mb-3">{{ trip.title }}</h3>
        <p class="text-blue-700 mb-4 flex-grow leading-relaxed">
          {{ trip.description }}
        </p>

        <div class="trip-details mb-5 text-blue-600 font-semibold space-y-2 text-sm sm:text-base">
          <div class="flex justify-between">
            <span class="flex items-center space-x-2">
              <i class="fas fa-clock"></i>
              <span>{{ trip.duration }} days</span>
            </span>
            <span class="flex items-center space-x-2">
              <i class="fas fa-user-friends"></i>
              <span>{{ trip.participants }} participants</span>
            </span>
          </div>
          <div class="flex justify-between">
            <span class="flex items-center space-x-2">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{ trip.cityName }}</span>
            </span>
            <span class="flex items-center space-x-2">
              <i class="fas fa-route"></i>
              <span>{{ trip.departureLocation }}</span>
            </span>
          </div>
          <div class="flex justify-between items-center">
            <span class="flex items-center space-x-1">
              <ng-container *ngFor="let star of [1,2,3,4,5]; let idx = index">
                <i
                  class="fas"
                  [ngClass]="idx < trip.rating ? 'fa-star text-yellow-400' : 'fa-star text-gray-300'"
                  aria-hidden="true"
                ></i>
              </ng-container>
              <span class="ml-2 text-gray-500 font-normal">{{ trip.rating }} / 5</span>
            </span>
            <span
              class="difficulty px-3 py-1 rounded-full font-semibold text-xs sm:text-sm"
              [ngClass]="{
                'bg-green-200 text-green-800': trip.difficulty === 'Easy',
                'bg-yellow-200 text-yellow-800': trip.difficulty === 'Medium',
                'bg-red-200 text-red-800': trip.difficulty === 'Hard'
              }"
            >
              {{ trip.difficulty }}
            </span>
          </div>
        </div>

        <ul class="amenities mb-5 flex flex-wrap gap-3 text-xs sm:text-sm text-blue-700 font-medium">
          <li class="flex items-center space-x-2" *ngIf="trip.amenities.includes('Meals')">
            <i class="fas fa-utensils" aria-hidden="true"></i><span>Meals Included</span>
          </li>
          <li class="flex items-center space-x-2" *ngIf="trip.amenities.includes('Transport')">
            <i class="fas fa-bus" aria-hidden="true"></i><span>Transportation</span>
          </li>
          <li class="flex items-center space-x-2" *ngIf="trip.amenities.includes('Guide')">
            <i class="fas fa-user-tie" aria-hidden="true"></i><span>Tour Guide</span>
          </li>
          <li class="flex items-center space-x-2" *ngIf="trip.amenities.includes('WiFi')">
            <i class="fas fa-wifi" aria-hidden="true"></i><span>WiFi Available</span>
          </li>
        </ul>

        <div class="flex justify-between items-center mb-5 text-blue-600 font-semibold text-sm sm:text-base">
          <p class="flex items-center space-x-2 hover:text-blue-800 transition-colors" aria-label="Price">
            <i class="fas fa-dollar-sign text-base sm:text-xl" aria-hidden="true"></i>
            <span>${{ trip.price.toLocaleString() }} USD</span>
          </p>
          <p class="text-gray-500 italic text-xs sm:text-sm" aria-label="Trip Dates">
            Dates: {{ trip.startDate | date:'MMM d' }} - {{ trip.endDate | date:'MMM d' }}
          </p>
        </div>

        <button
          (click)="onBookNow(trip)"
          class="btn-book w-full py-3 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold shadow-lg transition-transform transform active:scale-95 flex items-center justify-center gap-3"
          [attr.aria-label]="'Book now for ' + trip.title"
          type="button"
        >
          <i class="fas fa-plane-departure" aria-hidden="true"></i> Book Now
        </button>
      </div>
    </div>

    <button
      class="scroll-btn right-0 absolute top-1/2 -translate-y-1/2"
      (click)="scrollRight()"
      aria-label="Scroll Right"
      type="button"
    >
      <svg viewBox="0 0 24 24" class="arrow-icon" aria-hidden="true" focusable="false">
        <path d="M9 6l6 6-6 6" />
      </svg>
    </button>
  </div>
</section>

<app-services></app-services>
